[General]
# ---(通用)---
# 延迟测试
# > Internet 测试 URL
internet-test-url = http://www.aliyun.com
# > 代理测速 URL
proxy-test-url = http://www.instagram.com
# > 测试超时（秒）
test-timeout = 1
# TLS 引擎
tls-provider = openssl
# IPv6 支持（关闭）
ipv6 = false
# ------
# ---(Wi-Fi 访问)---
allow-wifi-access = true
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153
# ------
# ---(远程控制器)---
# 允许 Surge 请求查看器或 Surge CLI 进行管理控制。
# 如果允许由 Wi-Fi 控制则将「127.0.0.1」修改为「0.0.0.0」
# external-controller-access = password@127.0.0.1:6170
# ------
# ---(兼容性)---
# 兼容模式
# compatibility-mode = 0
# 跳过代理
skip-proxy = 127.0.0.1, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, localhost, *.local, mfs.ykimg.com*.ttf
# 排除简单主机名
exclude-simple-hostnames = true
# SSID 组策略
# 当 Wi-Fi 不是首选网络时 SSID 组策略使用默认策略（仅 macOS 版）
# use-default-policy-if-wifi-not-primary = false
# ------
# ---(DNS 服务器)---
# 电信 118.118.118.118
# 联通 116.116.116.116
dns-server = 119.29.29.29, 223.5.5.5, 114.114.114.114, 8.8.8.8, 8.8.4.4, 117.50.10.10, system
# ------
# ---(实验性功能)---
# 使用 Network framework
# network-framework = true
# ------
# ---(高级)---
# 日志级别
loglevel = notify
# 当遇到 REJECT 策略时返回错误页
show-error-page-for-reject = true
# Always Real IP Hosts
# 当 Surge VIF 处理 DNS 问题时，此选项要求 Surge 返回一个真正的 IP 地址，而不是一个假 IP 地址。
# DNS 数据包将被转发到上游 DNS 服务器。
always-real-ip = msftconnecttest.com, msftncsi.com, *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com
# Hijack DNS
# 默认情况下，Surge 只返回发送到 Surge DNS 地址的 DNS 查询的假 IP 地址(198.18.0.2)。
# 有些设备或软件总是使用硬编码的 DNS 服务器。 (例如 Google Speakers 总是使用 8.8.8.8)。 您可以使用此选项劫持查询，以获得一个假地址。
# hijack-dns = 8.8.8.8:53, 8.8.4.4:53
# TCP Force HTTP Hosts
# 让 Surge 把 TCP 连接当作 HTTP 请求来处理。Surge HTTP 引擎将处理这些请求，所有的高级功能，如捕获、重写和脚本等都可以使用。
force-http-engine-hosts = *.ott.cibntv.net,123.59.31.1,119.18.193.135,122.14.246.33,175.102.178.52
# VIF Excluded Routes
# Surge VIF 只能处理 TCP 和 UDP 协议。使用此选项可以绕过特定的 IP 范围，允许所有流量通过。
# tun-excluded-routes = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12
# VIF Included Routes
# 默认情况下，Surge VIF 接口会声明自己是默认路由。但是，由于 Wi-Fi 接口的路由较小，有些流量可能不会通过 Surge VIF 接口。使用此选项可以添加一条较小的路由。
# tun-included-routes = 192.168.1.12/32
# ------

[Replica]
# ---(实验性功能)---
# 0 为关闭，1 为开启
# > 隐藏 Apple 请求
hide-apple-request = 0
# > 隐藏崩溃追踪器请求
hide-crash-reporter-request = 1
# > 隐藏 UDP 会话
hide-udp = 0
# > 关键词过滤器
# none（关闭关键词过滤器） / whitelist（blacklist（仅记录包含关键字的请求）） / blacklist（仅记录不包含关键字的请求） / pattern（匹配通配符的请求）
# keyword-filter-type = none
# > 关键词
# keyword-filter = (null)
# ------

[Proxy Group]
Proxy = select, HongKong, Hinet, TaiWan, Singapore, South Korea, ST HongKong, JaPan, DIRECT
TikTok / LINE TV / Spotify = select, Hinet, TaiWan, ST HongKong, JaPan
Disney+ / Netflix = select, Singapore, Hinet, HongKong, TaiWan
StreamingSE = select, TaiWan, ST HongKong
Guard = select, REJECT, DIRECT, Proxy, ST HongKong
AutoTest = url-test, DIRECT, url=http://www.gstatic.com/generate_204, timeout=0, interval=0, tolerance=0
Final = select, Proxy, DIRECT
HongKong = fallback, url=http://www.youtube.com, policy-path=https://suc.exflux.me/sub?target=surge&ver=4&url=https%3A%2F%2Fapi.exfluxnetworks.com%3A4433%2Flink%2FoHnDmsltNjXcXKFq%3Fsub%3D2&insert=false&exclude=%E6%B8%B8%E6%88%8F%E4%B8%93%E7%BA%BF&include=%E9%A6%99%E6%B8%AF&emoji=true&list=true&udp=false&tfo=false&scv=false&fdn=false&sort=false, update-interval=0, timeout=0, interval=0
Hinet = fallback, url=http://www.google.com, policy-path=https://suc.exflux.me/sub?target=surge&ver=4&url=https%3A%2F%2Fapi.exfluxnetworks.com%3A4433%2Flink%2FoHnDmsltNjXcXKFq%3Fsub%3D2&insert=false&exclude=%E6%B8%B8%E6%88%8F%E4%B8%93%E7%BA%BF&include=Hinet&emoji=true&list=true&udp=false&tfo=false&scv=false&fdn=false&sort=false, update-interval=0, policy-regex-filter=台湾, timeout=0, interval=0
TaiWan = fallback, url=http://www.youtube.com, policy-path=https://suc.exflux.me/sub?target=surge&ver=4&url=https%3A%2F%2Fapi.exfluxnetworks.com%3A4433%2Flink%2FoHnDmsltNjXcXKFq%3Fsub%3D2&insert=false&exclude=%E6%B8%B8%E6%88%8F%E4%B8%93%E7%BA%BF&include=%E5%8F%B0%E6%B9%BE&emoji=true&list=true&udp=false&tfo=false&scv=false&fdn=false&sort=false, update-interval=0, timeout=0, interval=0
Singapore = fallback, url=http://www.youtube.com, policy-path=https://suc.exflux.me/sub?target=surge&ver=4&url=https%3A%2F%2Fapi.exfluxnetworks.com%3A4433%2Flink%2FoHnDmsltNjXcXKFq%3Fsub%3D2&insert=false&exclude=%E6%B8%B8%E6%88%8F%E4%B8%93%E7%BA%BF&include=%E6%96%B0%E5%8A%A0%E5%9D%A1&emoji=true&list=true&udp=false&tfo=false&scv=false&fdn=false&sort=false, update-interval=0, timeout=0, interval=0
South Korea = select, policy-path=https://suc.exflux.me/sub?target=surge&ver=4&url=https%3A%2F%2Fapi.exfluxnetworks.com%3A4433%2Flink%2FoHnDmsltNjXcXKFq%3Fsub%3D2&insert=false&exclude=%E6%B8%B8%E6%88%8F%E4%B8%93%E7%BA%BF&include=%E9%9F%A9%E5%9B%BD&emoji=true&list=true&udp=false&tfo=false&scv=false&fdn=false&sort=false, update-interval=0, policy-regex-filter=韩国
United States = fallback, url=http://www.youtube.com/, policy-path=https://suc.exflux.me/sub?target=surge&ver=4&url=https%3A%2F%2Fapi.exfluxnetworks.com%3A4433%2Flink%2FoHnDmsltNjXcXKFq%3Fsub%3D2&insert=false&exclude=%E6%B8%B8%E6%88%8F%E4%B8%93%E7%BA%BF&include=%E7%BE%8E%E5%9B%BD&emoji=true&list=true&udp=false&tfo=false&scv=false&fdn=false&sort=false, update-interval=0, policy-regex-filter=美国, timeout=0, interval=0
JaPan = fallback, url=http://www.youtube.com/, policy-path=https://suc.exflux.me/sub?target=surge&ver=4&url=https%3A%2F%2Fapi.exfluxnetworks.com%3A4433%2Flink%2FoHnDmsltNjXcXKFq%3Fsub%3D2&insert=false&exclude=%E6%B8%B8%E6%88%8F%E4%B8%93%E7%BA%BF&include=%E6%97%A5%E6%9C%AC&emoji=true&list=true&udp=false&tfo=false&scv=false&fdn=false&sort=false, update-interval=0, policy-regex-filter=日本, timeout=0, interval=0
Remaining flow = select, policy-path=https://sub.id9.cc/sub?target=surge&ver=4&url=https%3A%2F%2Flosadhwselfff2332dasd.xyz%2Flink%2FhgAQA9j9QFek64Xs%3Fsub%3D2&insert=false&config=%E5%93%81%E4%BA%91%E4%B8%93%E5%B1%9E%E9%85%8D%E7%BD%AE&include=%E6%B5%81%E9%87%8F&emoji=true&list=true&udp=false&tfo=false&scv=false&fdn=false&sort=false, update-interval=10800
ST HongKong = fallback, url=http://www.youtube.com/, policy-path=https://sub.id9.cc/sub?target=surge&ver=4&url=https%3A%2F%2Flosadhwselfff2332dasd.xyz%2Flink%2FhgAQA9j9QFek64Xs%3Fsub%3D2&insert=false&config=%E5%93%81%E4%BA%91%E4%B8%93%E5%B1%9E%E9%85%8D%E7%BD%AE&include=%E9%A6%99%E6%B8%AF&emoji=true&list=true&udp=false&tfo=false&scv=false&fdn=false&sort=false, update-interval=0, timeout=0, interval=0

[Rule]
# https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Filter/Extra/Apple/BlockiOSUpdate.list,REJECT
# Client
# > Proxy
PROCESS-NAME,v2ray,DIRECT
PROCESS-NAME,ss-local,DIRECT
PROCESS-NAME,UUBooster,DIRECT
# > Download
PROCESS-NAME,aria2c,DIRECT
PROCESS-NAME,fdm,DIRECT
PROCESS-NAME,Folx,DIRECT
PROCESS-NAME,NetTransport,DIRECT
PROCESS-NAME,Thunder,DIRECT
PROCESS-NAME,Transmission,DIRECT
PROCESS-NAME,uTorrent,DIRECT
PROCESS-NAME,WebTorrent,DIRECT
PROCESS-NAME,WebTorrent Helper,DIRECT
# HONGKONG YOUTUBE  等
RULE-SET,https://raw.githubusercontent.com/HsiaoweiYuen/CustomRules/main/Surge/Hongkong.list,Proxy,update-interval=86400
# > TikTok > LINE TV > Spotify等台湾流媒体
RULE-SET,https://raw.githubusercontent.com/HsiaoweiYuen/CustomRules/main/Surge/Taiwan.list,TikTok / LINE TV / Spotify,update-interval=86400
# > Netflix
RULE-SET,https://raw.githubusercontent.com/HsiaoweiYuen/CustomRules/main/Surge/Singapore.list,Disney+ / Netflix,update-interval=86400
# Unbreak 后续规则修正
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Unbreak.list,DIRECT,update-interval=86400
# Advertising 广告
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Advertising.list,Guard,update-interval=86400
# Privacy 隐私
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Privacy.list,Guard,update-interval=86400
# Hijacking 运营商劫持或恶意网站
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Hijacking.list,Guard,update-interval=86400
# Streaming 国际流媒体服务
# StreamingSE 中国流媒体服务（面向海外版本）
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/StreamingMedia/StreamingSE.list,StreamingSE,update-interval=86400
# Apple 服务
# 在 https://github.com/DivineEngine/Profiles/tree/master/Surge/Rulesets/Extra/Apple 获取所需服务引入 Ruleset 类型规则及新建策略组。
# Global 全球加速
RULE-SET,https://raw.githubusercontent.com/HsiaoweiYuen/CustomRules/main/Surge/Proxy.list,Proxy,update-interval=86400
# China 中国直连
RULE-SET,https://raw.githubusercontent.com/HsiaoweiYuen/CustomRules/main/Surge/china.list,DIRECT
# Local Area Network 局域网
RULE-SET,LAN,DIRECT
# 使用来自 ipipdotnet 的 ChinaIP 以解决数据不准确的问题，使用 ChinaIP.list 时禁用「GEOIP,CN」规则
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/ChinaIP.list,DIRECT,update-interval=86400
# GeoIP China(若启用，则禁用 ChinaIP.list)
# GEOIP,CN,DIRECT
# RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Game/Game.list,DIRECT
FINAL,Final,dns-failed

[Host]
# Firebase Cloud Messaging
mtalk.google.com = 108.177.125.188

[Header Rewrite]
# 据粗略统计，有大概三分之二的本项目使用者停留在了 Surge 2、3 时期故而保留了 Rewrite 及 MitM，所以如果你解锁了「模块」功能可以使用 sgmodule 后清空 [URL Rewrite] 及 [MITM] 部分，MitM 证书重新生成配置。
# 建议必选使用 General.sgmodule，其他 .sgmodule 按需加入

[MITM]
hostname = api.weibo.cn, mapi.weibo.com, *.uve.weibo.com, ios.prod.ftl.netflix.com, trade-acs.m.taobao.com, api.m.jd.com
ca-passphrase = 305FF222
ca-p12 = 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

[Script]
Wi-Fi Identify = type=event,event-name=network-changed,script-path=https://raw.githubusercontent.com/HsiaoweiYuen/CustomRules/main/Surge/Wi-Fi%20Identify.js,script-update-interval=0
# 京东
JD Cookie = type=http-request,pattern=https:\/\/api\.m\.jd\.com\/client\.action.*functionId=signBean,script-path=https://raw.githubusercontent.com/NobyDa/Script/master/JD-DailyBonus/JD_DailyBonus.js,script-update-interval=0
京东多合一签到 = type=cron,cronexp=5 0 * * *,wake-system=1,timeout=20,script-path=https://raw.githubusercontent.com/NobyDa/Script/master/JD-DailyBonus/JD_DailyBonus.js
京东历史价格 = type=http-response,pattern=^https?://api\.m\.jd\.com/client\.action\?functionId=(wareBusiness|serverConfig|basicConfig),requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/yichahucha/surge/master/jd_price.js,script-update-interval=0
# 淘宝
淘宝历史价格 = type=http-request,pattern=^http://.+/amdc/mobileDispatch,requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/yichahucha/surge/master/tb_price.js,script-update-interval=0
淘宝历史价格 = type=http-response,pattern=^https?://trade-acs\.m\.taobao\.com/gw/mtop\.taobao\.detail\.getdetail,requires-body=1,max-size=0,script-path=https://raw.githubusercontent.com/yichahucha/surge/master/tb_price.js,script-update-interval=0
